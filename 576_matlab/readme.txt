step 1.  generate picture frames from video. (e.g. picture_12)
step 2.  run script.m to get background panorama.
step 3.  run generate_fore_img.m to get foreground images.
step 4.  select N good foreground images from the file(e.g.  picture_12_fore) as key frames.
step 5. run task1_2_3.m to get the final result.